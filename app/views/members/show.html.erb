<%- content_for :title do -%><%= @member.handle %> | Members | <%- end -%>

<%= content_section 'member-info' do -%>
    <%= member_avatar @member, link: false %>
    <%- twitch_fragment = @member.twitch_fragment -%>
    <div class="member-external-links">
        <%- ExternalLink.to_sorted(@member.external_links).each do |el| -%>
            <%= link_to external_link_icon(el), external_link_resource_url(el) %>
        <%- end -%>
    </div>
    <%- unless twitch_fragment.nil? then -%>
        <a
            class="member-twitch-indicator"
            href="<%= external_link_twitch_channel_url twitch_fragment %>"
            data-fragment="<%= twitch_fragment %>"
        >
            <span>Live Now @ Twitch:&nbsp;&nbsp;<span class="twitch-info-title"></span></span>
            <span>Playing&nbsp;&nbsp;<span class="twitch-info-game"></span>&nbsp;&nbsp;with <span class="twitch-info-viewers"></span> viewers.</span>
        </a>
    <%- end -%>
    <div class="member-biography"><%= render_markdown @member.biography %></div>
    <%= user_actions is_admin_or?(@member) do -%>
        <%= icon_link_to :white, :settings, 'Edit Member', edit_member_path(@member), class: 'button' %>
        <%= icon_link_to :white, :link, 'Manage External Links', member_external_links_path(@member), class: 'button' %>
    <%- end -%>
<%- end -%>

<%= content_row :large, :halfs do -%>
    <%= content_section 'member-games', title: 'Games' do -%>
        <%= render partial: 'game_memberships/list', locals: {
            assoc: @member,
            assoc_type: :member
        } %>
    <%- end -%>
    
    <%= content_section 'member-recent-videos', title: 'Recent Videos' do -%>
    <%- end -%>
<%- end -%>

<% content_for :user_actions do %>
    <%- admin_only do -%>
        <%= icon_link_to :white, 'image-area', 'Manage Member Backgrounds', member_background_images_path(@member), class: 'button' %>
        <%= icon_delete_link :white, 'Delete Member', member_path(@member), class: 'button danger' %>
    <%- end -%>
<% end %>
